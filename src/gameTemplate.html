
<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Ch2BaseFile - Template For Chapter 2 Examples</title>
<script src="modernizr.custom.34365.js"></script>
<script src="jquery2-min.js"></script>
<script type="text/javascript">
var mouse={ x:0, y:0,
    down:false,
    init:function(){
        $('#gamecanvas').mousemove(mouse.mousemovehandler);
        $('#gamecanvas').mousedown(mouse.mousedownhandler);
        $('#gamecanvas').mouseup(mouse.mouseuphandler);
        $('#gamecanvas').mouseout(mouse.mouseuphandler);
    },
    mousemovehandler:function(ev){
var offset=$('#gamecanvas').offset();
mouse.x=ev.pageX - offset.left; mouse.y=ev.pageY - offset.top;
if (mouse.down) { mouse.dragging = true;
} },
mousedownhandler:function(ev){ mouse.down = true;
mouse.downX = mouse.x;
mouse.downY = mouse.y; ev.originalEvent.preventDefault();
    },
    mouseuphandler:function(ev){
mouse.down = false;
mouse.dragging = false; }
}

window.addEventListener('load', eventWindowLoaded, false);
function eventWindowLoaded() {
 canvasApp();
 mouse.init();
}
function canvasSupport () {
return Modernizr.canvas;
 }
function canvasApp(){
if (!canvasSupport()) {
 return;
}else{
  var theCanvas = document.getElementById("canvas");
  var context = theCanvas.getContext("2d");
}
drawScreen();
function drawScreen() {
//make changes here.
//   context.fillStyle = '#aaaaaa';
//   context.fillRect(100,100, 200, 200);
//   context.strokeRect(40,40,100,100);
//   context.fillStyle = '#000000';
//   context.font = '20px _sans';
//   context.textBaseline = 'top';
//   context.fillText ("Canvas!",50, 50);
//   context.beginPath();
//   context.strokeStyle = "black";
//   context.lineWidth = 5;
//   context.arc(100,100,20,(Math.PI/180)*0,(Math.PI/180)*360,false);
//   context.stroke();
//   context.closePath();
	var animationFrames = [1,2,3,4,5,6,7,8];
	var frameIndex = 0;
	var dx = 33;
	var dy = 33;
	var x = 0; 
	var y = 0;
	var sourceDex = 33;
	var counter = 0;
	var tileSheet = new Image();
	tileSheet.addEventListener('load',eventShipLoaded , false);
	tileSheet.src = 'tankbrigade.png';
	function startUp(){
		setInterval(drawScreen,100);
	}
	function eventShipLoaded() {
		startUp(); 
	}
	
	function drawScreen() {
	//draw a background so we can see the Canvas edges 

		context.fillStyle = "#aaaaaa";
		context.fillRect(0,0,23*33,13*33);
               var tileBlockW = 33;
               var tileBlockH = 33;
                var mapRows = 13; 
                var mapCols = 23;
                var sourceX,sourceY = 0;
                var mapIndexOffset = -1;
                var mapTitle = [[78,78,78,78,78,78,78,78,78,78,78,78,78,78,78,78,78,78,55,78,78,78,78],
  [102,102,102,102,102,102,102,102,102,102,102,102,102,102,102,102,102,102,55,102,102,102,102],
  [102,102,102,102,102,102,102,102,102,102,102,102,102,102,102,102,102,102,55,102,102,102,102],
  [102,102,102,102,102,102,102,102,102,102,102,102,102,102,102,102,102,102,55,102,102,102,102],
  [102,102,102,102,102,102,102,102,102,102,102,102,102,102,100,100,100,100,55,102,102,102,102],
  [102,102,102,102,102,102,102,102,102,102,102,102,102,102,100,100,100,100,55,102,102,102,102],
  [102,102,102,102,102,102,102,102,102,102,102,102,102,102,102,102,102,102,55,102,102,102,102],
  [102,102,102,102,102,102,102,102,102,102,102,102,102,102,102,102,102,102,55,102,102,102,102],
  [102,102,100,100,102,102,102,102,102,102,102,102,102,102,102,102,102,102,55,102,102,102,102],
  [102,102,100,100,102,102,102,102,102,102,102,102,102,102,102,102,102,102,55,102,102,102,102],
  [102,102,100,100,102,102,102,102,60,60,60,60,102,102,102,102,102,102,55,102,102,102,102],
  [102,102,102,102,102,102,102,102,60,74,74,60,102,102,102,102,102,102,102,102,102,102,102],
  [102,102,102,102,102,102,102,102,60,74,74,60,102,102,102,102,102,102,102,102,102,102,102]];

  for (var rowCtr=0;rowCtr<mapRows;rowCtr++) { 
            for (var colCtr=0;colCtr<mapCols;colCtr++){						var tileId = mapTitle[rowCtr][colCtr]+mapIndexOffset; 				var sourceX = Math.floor(tileId % 24) * 33;//tmx use line-based count
		var sourceY = Math.floor(tileId / 24) * 33;
		context.drawImage(tileSheet, sourceX,
                sourceY,32,32,colCtr*33,rowCtr*33,32,32);
							} 
					}
	                                                                                        }
	}
 }
</script>
</head>
<body>
<div style="position: absolute; top: 50px; left: 50px;"> <canvas id="canvas" width="800" height="500">
Your browser does not support HTML5 Canvas. </canvas>
</div>
</body>
</html>
